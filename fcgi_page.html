<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>cheshirekow: C++ Bindings for fact-cgi</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cheshirekow
   &#160;<span id="projectnumber">v0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fcgi_page.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">C++ Bindings for fact-cgi </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>cpp-fcgi provides a thin object oriented wrapper around the thread-safe fast CGI library API. The library is rather object oriented to begin with, so for the most part it just provides member methods which wrap the object methods from the C library. There isn't any added functionality, it just makes code slightly more readable.</p>
<p>Below is a simple example of it's usage:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cpp-fcgi.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>( argc &lt; 2 )</div>
<div class="line">    {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">&quot; [SOCKETPATH]|:[PORTNUMBER] \n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classfcgi_1_1_socket.html">fcgi::Socket</a>  socket;</div>
<div class="line">    <a class="code" href="classfcgi_1_1_request.html">fcgi::Request</a> request;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// initialize the library (same as FCGX_Init() )</span></div>
<div class="line">    <span class="keywordtype">int</span> result = <a class="code" href="namespacefcgi.html#aec549cd588d8e5d91a90497fca5e8821">fcgi::init</a>();</div>
<div class="line">    <span class="keywordflow">if</span>( result != 0 )</div>
<div class="line">    {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to initialize FCGI&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// open the socket (same as FCGX_OpenSocket )</span></div>
<div class="line">    result = socket.<a class="code" href="classfcgi_1_1_socket.html#a61be390b8e45dce3d78f9df112fd1c21">open</a>(argv[1],100);</div>
<div class="line">    <span class="keywordflow">if</span>( result &lt; 0 )</div>
<div class="line">    {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to open socket: &quot;</span> &lt;&lt; argv[1] &lt;&lt; <span class="stringliteral">&quot;, error: &quot;</span></div>
<div class="line">                  &lt;&lt; result &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// initialize the request object and associate it with the opened socket</span></div>
<div class="line">    <span class="keywordflow">if</span>( request.<a class="code" href="classfcgi_1_1_request.html#aa1cd61ad78ed71dbf1f08c50d82edc56">init</a>(socket) != 0 )</div>
<div class="line">    {</div>
<div class="line">        socket.<a class="code" href="classfcgi_1_1_socket.html#a95d80cf1de0a5e4e9133a1cd4d233715">close</a>();</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to initialize the request\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// just a count of requests processed</span></div>
<div class="line">    <span class="keywordtype">int</span> reqNum = 0;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// loop and receive requests</span></div>
<div class="line">    <span class="keywordflow">while</span>( <span class="keyword">true</span> )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// accept a request</span></div>
<div class="line">        result = request.<a class="code" href="classfcgi_1_1_request.html#ae172dd0e7771346e299b269531084083">accept</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// check the result</span></div>
<div class="line">        <span class="keywordflow">if</span>( result != 0 )</div>
<div class="line">        {</div>
<div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to accept request: &quot;</span> &lt;&lt; result &lt;&lt; std::endl;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// write a simple message</span></div>
<div class="line">        request.<a class="code" href="classfcgi_1_1_request.html#a139335730f3362d70f618dbef10b35a0">out</a>() &lt;&lt; <span class="stringliteral">&quot;Content-type: text/html\n&quot;</span></div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;&lt;title&gt;FastCGI Hello! (C, fcgiapp library)&lt;/title&gt;&quot;</span></div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;&lt;h1&gt;FastCGI Hello! (C, fcgiapp library)&lt;/h1&gt;&quot;</span></div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;Request number &quot;</span> &lt;&lt; ++reqNum</div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot; running on host &lt;i&gt;&quot;</span></div>
<div class="line">            &lt;&lt; request.<a class="code" href="classfcgi_1_1_request.html#a3f7d4d04b1ed4e2ed038c92498433a54">getParam</a>(<span class="stringliteral">&quot;SERVER_NAME&quot;</span>)</div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;&lt;/i&gt; Process ID: &quot;</span></div>
<div class="line">            &lt;&lt; getpid()</div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// free request memory and prepare for the next one, note this is</span></div>
<div class="line">        <span class="comment">// not stricly necessary as it will happen automatically on the next</span></div>
<div class="line">        <span class="comment">// accept() call if the request hasn&#39;t been finished yet</span></div>
<div class="line">        request.<a class="code" href="classfcgi_1_1_request.html#aa11baa543c1ef9efca3401a10032afcd">finish</a>();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    request.<a class="code" href="classfcgi_1_1_request.html#a622fab64d3be2362f4fce9aa8cbd0537">free</a>(); <span class="comment">//&lt; free hidden memory of the request object</span></div>
<div class="line">    socket.<a class="code" href="classfcgi_1_1_socket.html#a95d80cf1de0a5e4e9133a1cd4d233715">close</a>(); <span class="comment">//&lt; close the socket</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Mar 22 2015 00:07:46 for cheshirekow by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
